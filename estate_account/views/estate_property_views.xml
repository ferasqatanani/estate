<odoo>
  <record id="view_estate_property_form_inherit_account" model="ir.ui.view">
    <field name="name">estate.property.form.inherit.account</field>
    <field name="model">estate.property</field>
    <field name="inherit_id" ref="estate.view_estate_property_form"/>
    <field name="arch" type="xml">
      <!-- Add Buyer field in the main group (after state) -->
      <xpath expr="//form/sheet/group/field[@name='state']" position="after">
        <field name="buyer_id" readonly="1"/>
      </xpath>

      <!-- Add an invoice smart button in header -->
      <xpath expr="//form/header" position="inside">
        <button class="oe_stat_button" type="object" name="action_open_invoice"
                icon="fa-file-text-o"
                modifiers="{'invisible': [('invoice_id','=',False)]}">
          <field name="invoice_id" widget="statinfo" string="Invoice"/>
        </button>
        <button name="action_create_invoice" type="object" string="Create Invoice"
                class="btn-secondary"
                modifiers="{'invisible': ['|', ('state','!=','sold'), ('invoice_id','!=',False)]}"/>
      </xpath>
    </field>
  </record>
</odoo>
